<!DOCTYPE html>
<html lang="en" data-theme="dark">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="FIS Chatbot ‚Äî AI-powered assistant with multiple models" />
    <title>FIS Chatbot</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>

    <!-- ‚îÄ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h1 class="logo">FIS<span>Chat</span></h1>
        <button class="icon-btn" id="themeToggle" title="Toggle theme">
          <svg id="themeIconSun" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor"
            stroke-width="2">
            <circle cx="12" cy="12" r="5" />
            <path
              d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
          </svg>
          <svg id="themeIconMoon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor"
            stroke-width="2" style="display:none">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
          </svg>
        </button>
      </div>

      <button class="new-chat-btn" id="newChatBtn">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19" />
          <line x1="5" y1="12" x2="19" y2="12" />
        </svg>
        New Chat
      </button>

      <div class="conversation-list" id="conversationList"></div>

      <div class="sidebar-footer">
        <button class="icon-btn settings-toggle" id="settingsToggle" title="Settings">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3" />
            <path
              d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z" />
          </svg>
        </button>
      </div>
    </aside>

    <!-- ‚îÄ‚îÄ‚îÄ SETTINGS PANEL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="settings-panel" id="settingsPanel">
      <div class="settings-panel-header">
        <h3>Settings</h3>
        <button class="icon-btn" id="settingsClose">&times;</button>
      </div>
      <div class="settings-group">
        <label for="temperatureSlider">Temperature <span id="tempVal">0.7</span></label>
        <input type="range" id="temperatureSlider" min="0" max="2" step="0.1" value="0.7" />
      </div>
      <div class="settings-group">
        <label for="topPSlider">Top P <span id="topPVal">1</span></label>
        <input type="range" id="topPSlider" min="0" max="1" step="0.05" value="1" />
      </div>
      <div class="settings-group">
        <label for="maxTokensSlider">Max Tokens <span id="maxTokensVal">2048</span></label>
        <input type="range" id="maxTokensSlider" min="256" max="4096" step="256" value="2048" />
      </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ MAIN CHAT AREA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <main class="main" id="main">
      <!-- Top bar -->
      <header class="top-bar">
        <button class="icon-btn sidebar-toggle" id="sidebarToggle" title="Toggle sidebar">
          <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="6" x2="21" y2="6" />
            <line x1="3" y1="12" x2="21" y2="12" />
            <line x1="3" y1="18" x2="21" y2="18" />
          </svg>
        </button>
        <select class="model-select" id="modelSelect"></select>
        <div class="top-bar-spacer"></div>
      </header>

      <!-- Messages -->
      <div class="messages" id="messagesContainer">
        <div class="welcome" id="welcome">
          <div class="welcome-icon">‚ú¶</div>
          <h2>How can I help you today?</h2>
          <p>Choose a model above, type a message, or upload an image.</p>
        </div>
      </div>

      <!-- Input area -->
      <div class="input-area">
        <div class="input-wrapper">
          <div class="image-preview" id="imagePreview" style="display:none">
            <img id="previewImg" />
            <button class="remove-img" id="removeImg">&times;</button>
          </div>
          <div class="input-row">
            <button class="icon-btn" id="attachBtn" title="Upload image">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                <path
                  d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.49" />
              </svg>
            </button>
            <input type="file" id="fileInput" accept="image/*" style="display:none" />
            <textarea id="chatInput" placeholder="Message FISChat‚Ä¶" rows="1"></textarea>
            <button class="icon-btn voice-btn" id="voiceBtn" title="Voice settings">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" />
                <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                <line x1="12" y1="19" x2="12" y2="23" />
                <line x1="8" y1="23" x2="16" y2="23" />
              </svg>
            </button>
            <button class="icon-btn video-btn" id="videoBtn" title="Generate video">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="23 7 16 12 23 17 23 7" />
                <rect x="1" y="5" width="15" height="14" rx="2" ry="2" />
              </svg>
            </button>
            <button class="send-btn" id="sendBtn" title="Send message">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="22" y1="2" x2="11" y2="13" />
                <polygon points="22 2 15 22 11 13 2 9 22 2" />
              </svg>
            </button>
          </div>
        </div>
        <p class="disclaimer">FISChat uses AI models via OpenRouter. Responses may be inaccurate.</p>
      </div>
    </main>

    <!-- ‚îÄ‚îÄ‚îÄ VOICE MODAL (Grok-style) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="modal-overlay" id="voiceModal">
      <div class="voice-modal">
        <div class="voice-modal-header">
          <div class="voice-title">
            <h3>Voice</h3>
            <span class="voice-badge" id="voiceProviderBadge">Gemini Live</span>
          </div>
          <button class="icon-btn" id="voiceModalClose">&times;</button>
        </div>

        <div class="voice-modal-body">
          <label class="voice-label">Select Voice</label>
          <div class="voice-grid" id="voiceGrid">
            <div class="voice-card selected" data-voice="alloy">
              <div class="voice-name">Alloy</div>
              <div class="voice-desc">Neutral ‚Ä¢ Clear</div>
            </div>
            <div class="voice-card" data-voice="echo">
              <div class="voice-name">Echo</div>
              <div class="voice-desc">Warm ‚Ä¢ Male</div>
            </div>
            <div class="voice-card" data-voice="fable">
              <div class="voice-name">Fable</div>
              <div class="voice-desc">British ‚Ä¢ Expressive</div>
            </div>
            <div class="voice-card" data-voice="onyx">
              <div class="voice-name">Onyx</div>
              <div class="voice-desc">Deep ‚Ä¢ Male</div>
            </div>
            <div class="voice-card" data-voice="nova">
              <div class="voice-name">Nova</div>
              <div class="voice-desc">Energetic ‚Ä¢ Female</div>
            </div>
            <div class="voice-card" data-voice="shimmer">
              <div class="voice-name">Shimmer</div>
              <div class="voice-desc">Soft ‚Ä¢ Female</div>
            </div>
          </div>

          <label class="voice-label">Personality</label>
          <select id="personalitySelect" class="voice-select">
            <option value="assistant">ü§ñ Assistant</option>
            <option value="teacher">üë®‚Äçüè´ Teacher</option>
            <option value="friend">üòä Friend</option>
            <option value="professional">üíº Professional</option>
          </select>

          <label class="voice-label">Speed <span id="speedVal">1.0x</span></label>
          <input type="range" id="speedSlider" class="voice-slider" min="0.5" max="2.0" step="0.1" value="1.0" />

          <label class="voice-label">Provider</label>
          <select id="voiceProvider" class="voice-select">
            <option value="gemini">‚ö° Gemini (faster, cheaper)</option>
            <option value="openai">üéß OpenAI (higher quality)</option>
          </select>

          <div class="voice-status" id="voiceStatus">
            <div class="voice-indicator"></div>
            <span id="voiceStatusText">Click mic to start speaking</span>
            <span class="voice-timer" id="voiceTimer">00:00</span>
          </div>

          <div class="voice-transcripts" id="voiceTranscripts">
            <div class="voice-transcript" id="userTranscript">You: ‚Ä¶</div>
            <div class="voice-transcript" id="aiTranscript">AI: ‚Ä¶</div>
          </div>
        </div>
        <div class="voice-modal-footer">
          <button class="btn-secondary" id="voiceEndBtn">End conversation</button>
          <button class="voice-mic-btn" id="voiceMicBtn">
            <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" />
              <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
              <line x1="12" y1="19" x2="12" y2="23" />
              <line x1="8" y1="23" x2="16" y2="23" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ VIDEO GENERATION MODAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="modal-overlay" id="videoModal">
      <div class="modal">
        <div class="modal-header">
          <h3>Generate Video</h3>
          <button class="icon-btn" id="videoModalClose">&times;</button>
        </div>
        <div class="modal-body">
          <label class="modal-label">Select Avatar</label>
          <div class="avatar-grid" id="avatarGrid">
            <div class="avatar-card selected" data-avatar="professional">
              <img src="img/avatars/professional.png" alt="Professional" class="avatar-img"
                onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
              <div class="avatar-placeholder" style="background:linear-gradient(135deg,#6366f1,#8b5cf6)">üë§</div>
              <span>Professional</span>
            </div>
            <div class="avatar-card" data-avatar="casual">
              <img src="img/avatars/casual.png" alt="Casual" class="avatar-img"
                onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
              <div class="avatar-placeholder" style="background:linear-gradient(135deg,#ec4899,#f43f5e)">üßë</div>
              <span>Casual</span>
            </div>
            <div class="avatar-card" data-avatar="cartoon">
              <img src="img/avatars/cartoon.png" alt="Cartoon" class="avatar-img"
                onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
              <div class="avatar-placeholder" style="background:linear-gradient(135deg,#f59e0b,#ef4444)">ü§ñ</div>
              <span>Cartoon</span>
            </div>
            <div class="avatar-card" data-avatar="anime">
              <img src="img/avatars/anime.png" alt="Anime" class="avatar-img"
                onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
              <div class="avatar-placeholder" style="background:linear-gradient(135deg,#14b8a6,#06b6d4)">üé≠</div>
              <span>Anime</span>
            </div>
            <div class="avatar-card" data-avatar="realistic">
              <img src="img/avatars/realistic.png" alt="Realistic" class="avatar-img"
                onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
              <div class="avatar-placeholder" style="background:linear-gradient(135deg,#a855f7,#6366f1)">üßî</div>
              <span>Realistic</span>
            </div>
            <div class="avatar-card" data-avatar="minimal">
              <img src="img/avatars/minimal.png" alt="Minimal" class="avatar-img"
                onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
              <div class="avatar-placeholder" style="background:linear-gradient(135deg,#22c55e,#10b981)">üòä</div>
              <span>Minimal</span>
            </div>
          </div>
          <label class="modal-label">Video Quality</label>
          <div class="api-type-selector">
            <label class="api-type-option">
              <input type="radio" name="apiType" value="clips" checked />
              <div class="api-type-card">
                <div class="api-type-title">üé¨ Full-HD (Clips)</div>
                <div class="api-type-desc">High-quality 1080p with body movements ‚Ä¢ 15-45s processing</div>
              </div>
            </label>
            <label class="api-type-option">
              <input type="radio" name="apiType" value="expressives" />
              <div class="api-type-card">
                <div class="api-type-title">üé≠ Expressive (V4)</div>
                <div class="api-type-desc">Emotional avatars with sentiments ‚Ä¢ 1-5min processing</div>
              </div>
            </label>
          </div>

          <div id="sentimentSelector" class="sentiment-selector" style="display:none">
            <label class="modal-label">Emotion/Sentiment</label>
            <select id="sentimentSelect" class="modal-select">
              <option value="professional">Professional</option>
              <option value="empathetic">Empathetic</option>
              <option value="excited">Excited</option>
              <option value="friendly">Friendly</option>
              <option value="serious">Serious</option>
              <option value="calm">Calm</option>
            </select>
          </div>

          <label class="modal-label" for="docUpload">Upload PDF lecture/lesson</label>
          <div class="file-drop-area" id="fileDropArea">
            <span class="file-icon">üìÑ</span>
            <span class="file-msg">Drag & drop or click to upload PDF</span>
            <span class="file-sub">Max 10MB ‚Ä¢ Text will be summarized or explained</span>
            <input type="file" id="docUpload" accept="application/pdf" class="file-input" />
          </div>
          <div id="fileSelectedName" class="file-selected-name" style="display:none"></div>

          <label class="modal-label" for="videoCategory">Content Style</label>
          <select id="videoCategory" class="modal-select">
            <option value="summarize">Summarize</option>
            <option value="explanation">Explanation</option>
          </select>

          <div id="videoResult" class="video-result" style="display:none"></div>
        </div>

        <div class="modal-footer">
          <button class="btn-secondary" id="videoModalCancel">Cancel</button>
          <button class="btn-primary" id="videoGenerate">Generate Video</button>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>

</html>